<?xml version="1.0" encoding="UTF-8"?>
<!-- RUTA: src/main/resources/com/mycompany/pasteleria/desktop/view/Productos.fxml -->
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.mycompany.pasteleria.desktop.controller.ProductosController"
      spacing="10">

  <padding>
    <Insets top="16" right="16" bottom="16" left="16"/>
  </padding>

  <children>

    <!-- BARRA SUPERIOR -->
    <HBox spacing="8" alignment="CENTER_LEFT">
      <children>
        <Label text="Productos" style="-fx-font-size:18; -fx-font-weight:bold;"/>

        <Label text="Categoría:"/>
        <ComboBox fx:id="cbCategoria" prefWidth="200" promptText="Todas"/>

        <Pane HBox.hgrow="ALWAYS"/>

        <TextField fx:id="txtBuscar"
                   promptText="Buscar por nombre o descripción..."
                   prefWidth="280"/>

        <Button fx:id="btnBuscar" text="Buscar" onAction="#buscar"/>
        <Button fx:id="btnRefrescar" text="Refrescar" onAction="#refrescar"/>
        <Button fx:id="btnNuevo" text="Nuevo" onAction="#nuevo"/>

        <ToggleButton fx:id="tglCards" text="Tarjetas" selected="true" onAction="#switchToCards"/>
        <ToggleButton fx:id="tglTable" text="Tabla" onAction="#switchToTable"/>
      </children>
    </HBox>

    <!-- CENTRO -->
    <StackPane VBox.vgrow="ALWAYS">
      <children>

        <!-- VISTA TARJETAS -->
        <ScrollPane fx:id="cardsScroll"
                    fitToWidth="true"
                    hbarPolicy="NEVER"
                    vbarPolicy="AS_NEEDED"
                    visible="true"
                    managed="true">
          <content>
            <TilePane fx:id="cardGrid"
                      hgap="12" vgap="12"
                      prefColumns="4">
              <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
              </padding>
            </TilePane>
          </content>
        </ScrollPane>

        <!-- VISTA TABLA -->
        <!-- OJO: aquí ya NO va columnResizePolicy -->
        <TableView fx:id="tbl"
                   visible="false"
                   managed="false">
          <columns>
            <TableColumn fx:id="colId"        text="ID"          prefWidth="70"  maxWidth="90"/>
            <TableColumn fx:id="colNombre"    text="Nombre"      prefWidth="160"/>
            <TableColumn fx:id="colCategoria" text="Categoría"   prefWidth="130"/>
            <TableColumn fx:id="colPrecio"    text="Precio"      prefWidth="90"  maxWidth="120"/>
            <TableColumn fx:id="colStock"     text="Stock"       prefWidth="70"  maxWidth="100"/>
            <TableColumn fx:id="colEstado"    text="Estado"      prefWidth="90"  maxWidth="120"/>
            <!-- esta se estira, el controller la termina de ajustar -->
            <TableColumn fx:id="colDesc"      text="Descripción"/>
          </columns>
          <placeholder>
            <Label text="Sin productos."/>
          </placeholder>
        </TableView>

        <!-- LOADER -->
        <ProgressIndicator fx:id="loader"
                           visible="false"
                           maxWidth="80"
                           maxHeight="80"
                           StackPane.alignment="CENTER"/>
      </children>
    </StackPane>

    <!-- PIE -->
    <HBox spacing="8" alignment="CENTER_LEFT">
      <children>
        <Button fx:id="btnPrecio"   text="Editar precio"  onAction="#editarPrecio"/>
        <Button fx:id="btnStock"    text="Sumar stock"    onAction="#sumarStock"/>
        <Button fx:id="btnEstado"   text="Cambiar estado" onAction="#cambiarEstado"/>
        <Button fx:id="btnImagenes" text="Imágenes..."    onAction="#gestionarImagenes"/>

        <Pane HBox.hgrow="ALWAYS"/>

        <Button fx:id="btnExport"   text="Exportar CSV"   onAction="#exportarCSV"/>
      </children>
    </HBox>

  </children>
</VBox>
