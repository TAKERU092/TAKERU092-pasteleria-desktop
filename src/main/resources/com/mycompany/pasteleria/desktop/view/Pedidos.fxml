<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.mycompany.pasteleria.desktop.controller.PedidosController"
      spacing="12" fillWidth="true">

  <padding><Insets top="12" right="12" bottom="12" left="12"/></padding>

  <!-- Topbar: título + buscar + MULTIFILTRO estados -->
  <HBox spacing="8" alignment="CENTER_LEFT">
    <children>
      <Label text="Pedidos" style="-fx-font-size:16; -fx-font-weight:700;"/>
      <Pane HBox.hgrow="ALWAYS"/>
      <TextField fx:id="txtBuscar" promptText="Buscar N° o cliente..." prefWidth="280"/>
      <!-- Botón de menú con check múltiples para estados -->
      <MenuButton fx:id="btnEstados" text="Filtrar estados" mnemonicParsing="false" />
      <Button fx:id="btnBuscar" text="Buscar" onAction="#buscar"/>
      <Button fx:id="btnRefrescar" text="Refrescar" onAction="#refrescar"/>
    </children>
  </HBox>

  <!-- Tabla -->
  <StackPane VBox.vgrow="ALWAYS">
    <children>

      <TableView fx:id="tbl" prefHeight="520">
        <columns>
          <TableColumn fx:id="colNum"     text="N°"            prefWidth="90"/>
          <TableColumn fx:id="colCliente" text="Cliente"       prefWidth="260"/>
          <TableColumn fx:id="colFecPed"  text="Fecha pedido"  prefWidth="140"/>
          <TableColumn fx:id="colFecEnt"  text="Fecha entrega" prefWidth="140"/>
          <TableColumn fx:id="colHorEnt"  text="Hora entrega"  prefWidth="120"/>
          <TableColumn fx:id="colEstado"  text="Estado"        prefWidth="150"/>
        </columns>
        <placeholder>
          <Label text="Sin pedidos. Ajusta filtros o refresca."/>
        </placeholder>
      </TableView>

      <!-- Overlay de carga -->
      <Region visible="${loader.visible}" mouseTransparent="false"
              style="-fx-background-color: rgba(0,0,0,0.06);" />
      <ProgressIndicator fx:id="loader" visible="false"
                         maxWidth="80" maxHeight="80" StackPane.alignment="CENTER"/>

    </children>
  </StackPane>

  <!-- Acciones + paginación -->
  <HBox spacing="8" alignment="CENTER_LEFT">
    <children>
      <Label text="Acciones:"/>
      <Button fx:id="btnToCocina" text="Enviar a cocina" onAction="#toEnCocina"/>
      <Button fx:id="btnAsignar"  text="Asignar delivery" onAction="#asignarDelivery"/>
      <Pane HBox.hgrow="ALWAYS"/>
      <Label fx:id="lblRango" text="Mostrando —"/>
      <Button fx:id="btnPrev" text="Anterior" onAction="#paginaAnterior"/>
      <Button fx:id="btnNext" text="Siguiente" onAction="#paginaSiguiente"/>
    </children>
  </HBox>

</VBox>
